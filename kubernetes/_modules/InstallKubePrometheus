InstallKubePrometheus() {

	echo -e "\nRemoving Grafana and Prometheus..\n"

	for YAML in $(ls ../kube-prometheus/*.y*ml | sort -r)
	do
		echo ${YAML}
		${KUBECTL} --kubeconfig="${HOME}/${CLUSTER_NAME}-kubeconfig" delete -f ${YAML}
	done

	echo -e "\nSleeping for 30 seconds..\n"
	sleep 30

	echo -e "\nInstalling Grafana and Prometheus..\n"
	cat ../kube-prometheus/grafana-service.yaml.template | sed "s/GRAFANA_SERVICE_IP/${GRAFANA_SERVICE_IP}/g" > ../kube-prometheus/grafana-service.yaml
	# cat ../kube-prometheus/alertmanager-service.yaml.template | sed "s/ALERTMANAGER_SERVICE_IP/${ALERTMANAGER_SERVICE_IP}/g" > ../kube-prometheus/alertmanager-service.yaml
	# cat ../kube-prometheus/prometheus-service.yaml.template | sed "s/PROMETHEUS_SERVICE_IP/${PROMETHEUS_SERVICE_IP}/g" > ../kube-prometheus/prometheus-service.yaml

	for YAML in $(ls ../kube-prometheus/*.y*ml | sort)
	do
		echo ${YAML}
		${KUBECTL} --kubeconfig="${HOME}/${CLUSTER_NAME}-kubeconfig" create -f ${YAML}
	done

	echo -e "\nSleeping for 10 seconds for CRDs to get updated..\n"
	sleep 10

	until ${KUBECTL} --kubeconfig="${HOME}/${CLUSTER_NAME}-kubeconfig" get customresourcedefinitions servicemonitors.monitoring.coreos.com
	do 
		date
		sleep 1
		echo ""
	done

	until ${KUBECTL} --kubeconfig="${HOME}/${CLUSTER_NAME}-kubeconfig" get servicemonitors --all-namespaces
	do 
		date
		sleep 1
		echo ""
	done

	${KUBECTL} --kubeconfig="${HOME}/${CLUSTER_NAME}-kubeconfig" apply -f ../kube-prometheus/

	git add ../kube-prometheus/*.yaml
	git commit -m "`basename $0` - Updated Kube Prometheus installation YAML files generated by setup script"
	git push

}
